<!-- src/app/components/instructor-profile/instructor-profile.component.html -->

<div class="container mt-4">
  <h2>Instructor Management</h2>

  <div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>
  <div *ngIf="successMessage" class="alert alert-success">{{ successMessage }}</div>

  <!-- Instructor List -->
  <div class="row">
    <div class="col-md-4">
      <button class="btn btn-primary mb-3" (click)="initNewInstructor()">Add New Instructor</button>
      <ul class="list-group">
        <li *ngFor="let inst of instructors"
            class="list-group-item"
            [class.active]="instructor?.id === inst.id"
            (click)="selectInstructor(inst.id)">
          {{ inst.firstName }} {{ inst.lastName }}
        </li>
      </ul>
    </div>

    <!-- Profile Form -->
    <div class="col-md-8">
      <div *ngIf="isLoading" class="text-center">Loading...</div>

      <form *ngIf="!isLoading" [formGroup]="profileForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label>First Name</label>
          <input type="text" formControlName="firstName" class="form-control">
          <small class="text-danger">{{ getFieldError('firstName') }}</small>
        </div>

        <div class="form-group">
          <label>Last Name</label>
          <input type="text" formControlName="lastName" class="form-control">
          <small class="text-danger">{{ getFieldError('lastName') }}</small>
        </div>

        <div class="form-group">
          <label>Email</label>
          <input type="email" formControlName="email" class="form-control">
          <small class="text-danger">{{ getFieldError('email') }}</small>
        </div>

        <div class="form-group">
          <label>Password</label>
          <input type="password" formControlName="password" class="form-control">
          <small class="text-danger">{{ getFieldError('password') }}</small>
        </div>

        <div class="form-group">
          <label>CIN</label>
          <input type="text" formControlName="cin" class="form-control">
          <small class="text-danger">{{ getFieldError('cin') }}</small>
        </div>

        <div class="form-group">
          <label>Phone</label>
          <input type="text" formControlName="telephone" class="form-control">
          <small class="text-danger">{{ getFieldError('telephone') }}</small>
        </div>

        <div class="form-group">
          <label>Speciality</label>
          <input type="text" formControlName="specialite" class="form-control">
          <small class="text-danger">{{ getFieldError('specialite') }}</small>
        </div>

        <div class="form-group">
          <label>Address</label>
          <textarea formControlName="address" class="form-control"></textarea>
        </div>

        <div class="mt-3">
          <button *ngIf="isEditing" type="submit" class="btn btn-success" [disabled]="isLoading">
            Save Changes
          </button>
          <button *ngIf="!isEditing" type="button" class="btn btn-warning" (click)="toggleEdit()">
            Edit
          </button>
          <button *ngIf="instructor && !isEditing" type="button" class="btn btn-danger ml-2" (click)="deleteInstructor(instructor.id)">
            Delete
          </button>
        </div>
      </form>
    </div>
  </div>
</div>